/**
 * Advanced Accordion – Frontend Styles
 *
 * Uses CSS custom properties for animation values so they can be set inline
 * by both the block save markup and the frontend JS.
 */

/* ================================================================
 * Custom Properties (defaults – overridden per-block via inline styles)
 * ================================================================ */

.wp-block-advanced-accordion {
	--aa-duration: 0.4s;
	--aa-easing: ease;
	--aa-fade-duration: 0.3s;
	--aa-slide-distance: 10px;
	--aa-stagger: 0ms;
}

/* ================================================================
 * Container
 * ================================================================ */

.wp-block-advanced-accordion {
	width: 100%;
	margin-bottom: 1em;
}

/* ================================================================
 * Item
 * ================================================================ */

.wp-block-accordion-item {
	border: 1px solid #ddd;
	border-radius: 4px;
	margin-bottom: 0;
	overflow: visible;
	transition: border-color 0.2s ease;

	&+.wp-block-accordion-item {
		border-top: 0;
	}

	&:first-child {
		border-top-left-radius: 4px;
		border-top-right-radius: 4px;
	}

	&:last-child {
		border-bottom-left-radius: 4px;
		border-bottom-right-radius: 4px;
	}

	&:only-child {
		border-radius: 4px;
	}
}

/* ================================================================
 * Toggle (heading / button)
 * ================================================================ */

.wp-block-accordion-toggle {
	width: 100%;
}

.aa-toggle-heading {
	margin: 0;
	padding: 0;
	font-size: inherit;
	line-height: inherit;
	width: 100%;
	display: block;
}

.aa-toggle-button {
	display: flex;
	align-items: center;
	width: 100%;
	max-width: 100%;
	padding: 16px 20px;
	border: none;
	background: transparent;
	cursor: pointer;
	font: inherit;
	color: inherit;
	text-align: left;
	gap: 12px;
	appearance: none;
	-webkit-appearance: none;
	box-sizing: border-box;

	&:hover {
		background-color: rgba(0, 0, 0, 0.03);
	}

	&:focus-visible {
		outline: 2px solid #007cba;
		outline-offset: -2px;
		border-radius: 2px;
	}
}

/* Icon position: left – button is row; icon is first */
.wp-block-accordion-toggle[data-icon-position="left"] .aa-toggle-button {
	flex-direction: row;
}

/* Icon position: right – icon pushed to end */
.wp-block-accordion-toggle[data-icon-position="right"] .aa-toggle-button,
.wp-block-accordion-toggle[data-icon-position=""] .aa-toggle-button {
	justify-content: space-between;
}

.aa-toggle-text {
	flex: 1 1 auto;
}

/* ── Icon ────────────────────────────────────────────────────────── */

.aa-toggle-icon {
	flex: 0 0 auto;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	transition: transform var(--aa-duration) var(--aa-easing);

	svg {
		display: block;
	}
}

.aa-toggle-icon-custom {
	width: 20px;
	height: 20px;
	object-fit: contain;
}

/* Rotated state when item is open */
.wp-block-accordion-item.is-open {
	.wp-block-accordion-toggle[data-icon-rotation="true"] .aa-toggle-icon {
		transform: rotate(180deg);
	}
}

/* ================================================================
 * Content (collapsible region)
 * ================================================================ */

div.wp-block-accordion-content {
	overflow: hidden;
	max-height: 0;
	transition: max-height var(--aa-duration) var(--aa-easing);
	box-sizing: border-box;
}



.wp-block-accordion-content[hidden] {
	display: block;
	/* override UA hidden so maxHeight animation works */
	max-height: 0;
	overflow: hidden;
	visibility: hidden;
	pointer-events: none;
}

.wp-block-accordion-item.is-open>.wp-block-accordion-content,
.wp-block-accordion-item.is-open>div>.wp-block-accordion-content {
	visibility: visible;
	pointer-events: auto;
}

.wp-block-accordion-content>*:first-child {
	padding-top: 0;
}

.wp-block-accordion-content>*:last-child {
	padding-bottom: 16px;
}

/* ================================================================
 * Reduced Motion
 * ================================================================ */

@media (prefers-reduced-motion: reduce) {

	.wp-block-accordion-content,
	.aa-toggle-icon {
		transition: none ;
	}

	.wp-block-accordion-content>* {
		transition: none ;
		opacity: 1 ;
		transform: none ;
	}
}

/* ================================================================
 * High Contrast Mode
 * ================================================================ */

@media (forced-colors: active) {
	.wp-block-accordion-item {
		border: 1px solid ButtonText;
	}

	.aa-toggle-button {
		forced-color-adjust: none;
		color: ButtonText;
		background: ButtonFace;

		&:hover,
		&:focus-visible {
			outline: 2px solid Highlight;
		}
	}

	.aa-toggle-icon svg {
		stroke: ButtonText;
	}
}

/* ================================================================
 * Strict Overrides
 * ================================================================ */

/* Ensure content stays visible if fade is disabled (overrides theme/inline styles) */
.wp-block-accordion-content.aa-no-fade {
	opacity: 1 ;
	/* Explicitly prevent any opacity/transform transitions on the content wrapper */
	transition: max-height var(--aa-duration) var(--aa-easing);
}

.wp-block-accordion-content.aa-no-fade * {
	opacity: 1 ;
	transition: none ;
	transform: none ;
	/* Override any theme-level transitions (like WordPress 2025) */
	animation: none ;
}